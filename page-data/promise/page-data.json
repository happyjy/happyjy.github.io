{"componentChunkName":"component---src-templates-single-post-js","path":"/promise","result":{"data":{"markdownRemark":{"id":"c7ce5ccf-30ae-55f6-9a60-5f218b8424cf","html":"<ul>\n<li>\n<p>javascript info 팬이 가수의 앨범을 사기위해서 아무런 정보 없이 대기 하기 보다는 가수가 앨범을 다만들면 팬들에게 그 소식을 알려 팬이 가수의 앨범을 살수 있다 라는 설명으로 promise로 설명 하고 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">목차\n# executor: promise\n# 소비자: then, catch, finally\n# 예시: loadScript</code></pre></div>\n</li>\n</ul>\n<h1 id=\"executor-promise\" style=\"position:relative;\"><a href=\"#executor-promise\" aria-label=\"executor promise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>executor: promise</h1>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// executor (제작 코드, \"가수\")</span>\n  <span class=\"token comment\">// resolve, reject 둘중 하나 함수 반드시 호출</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>\n<p>executor는 아래 콜백 중 하나를 반드시 호출해야 합니다.</p>\n<ul>\n<li>resolve(value): 성공적으로 끝난 경우 결과를 value param으로 전달하며 resolve 호출</li>\n<li>reject(error): 에러 발생시 에러 객체를 error param으로 전달하며 reject 호출</li>\n</ul>\n</li>\n<li>new Promise(executor)의 callback 'resolve(value)', 'reject(error)'의 state, result 상태</li>\n<li>\n<p>new Promise 생성자가 반환하는 promise 객체는 다음과 같은 내부 프로퍼티를 갖습니다.</p>\n<ul>\n<li>state: 처음엔 \"pending\"(보류)이었다 resolve가 호출되면 \"fulfilled\", reject가 호출되면 \"rejected\"로 변합니다.</li>\n<li>result: 처음엔 undefined이었다, resolve(value)가 호출되면 value로, reject(error)가 호출되면 error로 변합니다.</li>\n</ul>\n</li>\n<li>\n<p>성공일때 예제(resolve)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// 프라미스가 만들어질 때 executor 함수는 자동으로 실행됩니다.</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"done\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 1초 뒤에 일이 성공적으로 끝났다는 신호와 함께, result가 'done'이 됩니다.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>\n<p>실패일때 예제(reject)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// 1초 뒤에 에러와 함께 실행이 종료되었다는 신호를 보냅니다.</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러 발생!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>\n<p>resolve/reject 함수 호출 규칙</p>\n<ul>\n<li>executor에 의해서 끝난일은 resolve, reject중 첫번째로 오는 것만 수행됩니다.</li>\n<li>\n<p>나머지는 무시</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"done\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"…\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 무시됨</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"…\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 무시됨</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"소비자-then-catch-finally\" style=\"position:relative;\"><a href=\"#%EC%86%8C%EB%B9%84%EC%9E%90-then-catch-finally\" aria-label=\"소비자 then catch finally permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>소비자: then, catch, finally</h1>\n<blockquote>\n<p>프라미스 객체는 executor(‘제작 코드’ 혹은 ‘가수’)와 결과나 에러를 받을 소비 함수(‘팬’)를 이어주는 역할을 합니다. 소비함수는 .then, .catch, .finally 메서드를 사용해 등록(구독)됩니다.</p>\n</blockquote>\n<h2 id=\"then\" style=\"position:relative;\"><a href=\"#then\" aria-label=\"then permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>then</h2>\n<blockquote>\n<p>executor가 성공, 실패 한경우를 모두 handling 할 수 있다.\nthen parameter에 두개를 전달해줄 수 있는데 첫번째는 param에 성공 handling function, 두번째는 param에 실패 hanlding function을 전달할 수 있다.</p>\n</blockquote>\n<ul>\n<li>\n<p>executor가 성공적으로 수행한 경우</p>\n<ul>\n<li>\n<p>POINT 주석 참고</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"done!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<p>// POINT: resolve 함수는 .then의 첫 번째 함수(인수)를 실행합니다.\npromise.then(\nresult => alert(result), // 1초 후 \"done!\"을 출력\nerror => alert(error) // 실행되지 않음\n)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- 아래 와 같이 성공했을때는 작성 가능하다\n- then function에 parameter 한개만 전달해주면 된다.\n  ```js\n  var promise = new Promise(resolve =&gt; {\n    setTimeout(() =&gt; resolve(&quot;done!&quot;), 1000)\n  })\n\n  promise.then(alert) // 1초 뒤 &quot;done!&quot; 출력</code></pre></div>\n</li>\n<li>\n<p>executor가 에러로 필해한 경우</p>\n<ul>\n<li>\n<p>POINT 주석 참고</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러 발생!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<p>// POINT: reject 함수는 .then의 두 번째 함수를 실행합니다.\npromise.then(\nresult => alert(result), // 실행되지 않음\nerror => alert(error) // 1초 후 \"Error: 에러 발생!\"를 출력\n)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"></code></pre></div>\n</li>\n</ul>\n<h2 id=\"catch\" style=\"position:relative;\"><a href=\"#catch\" aria-label=\"catch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>catch</h2>\n<blockquote>\n<p>executor 수행 결과 중 error만 다루고 싶을 때 사용</p>\n</blockquote>\n<ul>\n<li>\n<p>예시</p>\n<ul>\n<li>POINT 주석 참고</li>\n<li>\n<p>.catch(f)는 문법이 간결하다는 점만 빼고 .then(null,f)과 완벽하게 동일</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러 발생!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// POINT</span>\n<span class=\"token comment\">//  : .catch(f)는 promise.then(null, f)과 동일하게 작동합니다</span>\npromise<span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>alert<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1초 뒤 \"Error: 에러 발생!\" 출력</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"finally\" style=\"position:relative;\"><a href=\"#finally\" aria-label=\"finally permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>finally</h2>\n<blockquote>\n<p>try... catch에 finally가 있는 것 처럼 promise에도 finally가 있다.</p>\n</blockquote>\n<ul>\n<li>\n<p>finally 예1<br>\n: finally 이후 then을 통해 resolve 결과를 then으로 전달</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"result\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 성공, 실패 여부와 상관없이, 프라미스가 처리되면 실행됨</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">finally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Promise ready\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// &lt;-- .then에서 result를 다룸</span></code></pre></div>\n</li>\n<li>\n<p>finally 예2<br>\n: finally 이후 cath를 통해</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러 발생!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// setTimeout(()=>{ reject(new Error('error'))}, 1000); // executor 처리 시점만 조금 다르고 같은 결과</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 성공, 실패 여부와 상관없이, 프라미스가 처리되면 실행됨</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">finally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Promise ready\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// &lt;-- .catch에서 에러 객체를 다룸</span></code></pre></div>\n</li>\n</ul>\n<h1 id=\"예시-loadscript\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%8B%9C-loadscript\" aria-label=\"예시 loadscript permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예시: loadScript</h1>\n<ul>\n<li>callback에서 loadScript 설명에서 callback hell을 해결 할 수 있는 방법이 promise라고 했는데 그 방법을 소개하겠다.</li>\n<li>\n<p>promise로 구현한 loadScript</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">loadScript</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">src</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> script <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script\"</span><span class=\"token punctuation\">)</span>\n  script<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src\n\n  script<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">)</span>\n  script<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>src<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">를 불러오는 도중에 에러가 발생함</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  document<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>사용 방법</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token function\">loadScript</span><span class=\"token punctuation\">(</span>\n<span class=\"token string\">\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.js\"</span>\n<span class=\"token punctuation\">)</span>\n\npromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n<span class=\"token parameter\">script</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>script<span class=\"token punctuation\">.</span>src<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">을 불러왔습니다!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\npromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">script</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"또다른 핸들러...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>설명</li>\n<li>loadScript(script)로 스크립트를 읽고, 결과에 따라 그다음(.then)에 무엇을 할지에 대한 코드를 작성하면 되죠.</li>\n<li>비교</li>\n<li>콜백으로 구현시에 loadScript(script, callback)를 호출할 때, 함께 호출할 callback 함수가 준비되어 있어야 합니다.<br>\nloadScript를 호출하기 이전에 호출 결과로 무엇을 할지 미리 알고 있어야 했다.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h1>\n<ul>\n<li>Javascript.info<br>\n<a href=\"https://javascript.info/promise-basics\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://javascript.info/promise-basics</a></li>\n</ul>","frontmatter":{"title":"Promise","author":"jyoon","date":"Feb 16th 2020","tags":["promise","JavaScript"],"category":"Javascript Core","image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4UlEQVQ4y2P4fl+ObMQwqnmQaP7xAIQg7K93QexfD+W+3QMhwpq/3AXpgbD/v5QHct9fl/39TP7vM3mIfiyagRJAG97fkLWz4Aj04vp0W/bfU/kp7UKaqqxiosxB3lwX90r+eQzSj13z70dyr6/KsrExykgyA3VuXCDGwMAgJcFsZcoOZKRE8/5/Lg90FE7Nb67JcnIyykmz/H+jUFvID9Qzp1/4/3fFjfNFH5+VBjoNp7OhmjnAml/Kz+sXBmrWVmdbPl3kxxN5oHHf7uLxM0yzohzL59tyX+/JhflxMYCBqhLLlsWi2J39FRxavx7Kv7oiywHULM/y8aYsMHh/vZRfO0fU1Z4DqJ+Xh/HMDsn/z+RRNd+T+/dC/skFGSD59YEcULOCHAvQhldXZM7slPz/Xen/T6XidD6g/p56wf/vFRCagYr+vwB5D2hwX6Pg1DYhoCJ7S46fD+VtLdjZ2Rj7m4T2rBJ3tgVZvnCSCNDn6Jo3LBDl4WaEeI+ZmWHFDJH/7xSmdQhBBJmYQOLujhwfbsr+fIDqZ2BQ/X8lf+u49LR24b5GodM7JP+BExNQ8PZx6dk9wl21guvni36+K/v7sRyWRAIU+gOMjLcKQAvhyRDoqD/gGAIKAg0CJnKIOACifKWi6QO/2QAAAABJRU5ErkJggg==","aspectRatio":1,"src":"/static/c687488e8cd8859aed53d64ce9667f69/f3dec/javascript.png","srcSet":"/static/c687488e8cd8859aed53d64ce9667f69/d4144/javascript.png 175w,\n/static/c687488e8cd8859aed53d64ce9667f69/a5370/javascript.png 350w,\n/static/c687488e8cd8859aed53d64ce9667f69/f3dec/javascript.png 640w","sizes":"(max-width: 640px) 100vw, 640px"}}}}},"file":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,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","aspectRatio":0.7978723404255319,"src":"/static/84c6692e24199743b78879c33e27197b/630fb/jyoon.png","srcSet":"/static/84c6692e24199743b78879c33e27197b/5db04/jyoon.png 75w,\n/static/84c6692e24199743b78879c33e27197b/6d161/jyoon.png 150w,\n/static/84c6692e24199743b78879c33e27197b/630fb/jyoon.png 300w,\n/static/84c6692e24199743b78879c33e27197b/62b1f/jyoon.png 450w,\n/static/84c6692e24199743b78879c33e27197b/2a4de/jyoon.png 600w,\n/static/84c6692e24199743b78879c33e27197b/7a96f/jyoon.png 793w","sizes":"(max-width: 300px) 100vw, 300px"}}}},"pageContext":{"slug":"promise","tableOfContents":"<ul>\n<li><a href=\"/promise/#executor-promise\">executor: promise</a></li>\n<li>\n<p><a href=\"/promise/#%EC%86%8C%EB%B9%84%EC%9E%90-then-catch-finally\">소비자: then, catch, finally</a></p>\n<ul>\n<li><a href=\"/promise/#then\">then</a></li>\n<li><a href=\"/promise/#catch\">catch</a></li>\n<li><a href=\"/promise/#finally\">finally</a></li>\n</ul>\n</li>\n<li><a href=\"/promise/#%EC%98%88%EC%8B%9C-loadscript\">예시: loadScript</a></li>\n<li><a href=\"/promise/#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>","imageUrl":"jyoon.png"}},"staticQueryHashes":["3542266321","3649515864","63159454"]}